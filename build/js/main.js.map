{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["function is_touch_device() {\r\n return (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || navigator.msMaxTouchPoints > 0);\r\n}\r\n\r\nvar mobileGlobal, touchGlobal;\r\n\r\nif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\r\n document.body.classList.add(\"mobile\");\r\n mobileGlobal = true; \r\n}\r\n\r\nif(is_touch_device()) {\r\n  document.body.classList.add(\"touch\");\r\n  touchGlobal = true;\r\n}\r\nif ('objectFit' in document.documentElement.style === false) {\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tArray.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]'), function (image) {\r\n\t\t\t(image.runtimeStyle || image.style).background = 'url(\"' + image.src + '\") no-repeat 50%/' + (image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));\r\n\r\n\t\t\timage.src = 'data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'' + image.width + '\\' height=\\'' + image.height + '\\'%3E%3C/svg%3E';\r\n\t\t});\r\n\t});\r\n}\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  var dropdown = document.querySelectorAll(\".dropdown\");\r\n  document.addEventListener(\"click\", closeDropdown);\r\n  document.addEventListener(\"touchstart\", closeDropdown);\r\n  \r\n  for(var i = 0; i < dropdown.length; i++) {\r\n    dropdown[i].addEventListener(\"click\", toggleDropdown);    \r\n  }\r\n  \r\n});\r\n\r\nfunction toggleDropdown(e) {\r\n  var elem;  \r\n  var classList = Array.prototype.slice.call(e.target.classList, 0);\r\n  \r\n  if(classList.indexOf(\"dropdown\") !== -1) {\r\n    elem = e.target;    \r\n  } else {\r\n    elem = e.target.parentElement.parentNode;\r\n  }\r\n  \r\n  elem.classList.toggle(\"dropdown--open\");\r\n  var options = document.querySelectorAll(\".dropdown--open .dropdown__item\");\r\n  \r\n  for(var i = 0; i < options.length; i++) {\r\n    options[i].addEventListener(\"click\", selectOption);\r\n  }\r\n}\r\n\r\nfunction closeDropdown(e) {\r\n  var classList = Array.prototype.slice.call(e.target.classList, 0);\r\n  var parentClassList = Array.prototype.slice.call(e.target.parentElement.parentNode.classList, 0);\r\n  \r\n  if(document.querySelector(\".dropdown--open\") && classList.indexOf(\"dropdown\") == -1 && parentClassList.indexOf(\"dropdown\") == -1) {\r\n    document.querySelector(\".dropdown--open\").classList.remove(\"dropdown--open\");\r\n  }\r\n  \r\n}\r\n\r\nfunction selectOption(e) {\r\n  var elem = e.target;\r\n  var option = document.querySelectorAll(\".dropdown .dropdown__item--selected\");\r\n  option[0].classList.remove(\"dropdown__item--selected\");\r\n  elem.classList.add(\"dropdown__item--selected\");\r\n}\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  var player = document.getElementById('video-player');\r\n  var control = document.querySelector('.video__controls-play');\r\n  var video = document.querySelector('.video__item');\r\n  var flag = false;\r\n  \r\n  if(!mobileGlobal) {\r\n    video.setAttribute(\"preload\", \"true\");\r\n  }\r\n \r\n  video.addEventListener(\"loadedmetadata\", function() {\r\n    var duration = Math.round(video.duration)/100;\r\n    document.querySelector('.video-section__duration').innerHTML = duration;\r\n  });\r\n  \r\n  player.addEventListener(\"click\", function() {\r\n    player.classList.add('video--played');\r\n    \r\n    flag = true;\r\n        \r\n    if(flag) {\r\n      video.play();\r\n    } \r\n    \r\n  });\r\n});\r\nvar popups;\r\nvar scrollButtonCount = 2;\r\nvar tabletSize = 768;\r\nvar desctopSize = 1280;  \r\nvar popupInner;\r\nvar heightArray;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  var carousel = document.getElementById(\"carousel\");\r\n  var popupsEl = document.getElementById(\"popups\");  \r\n  var carouselContent = document.querySelectorAll(\"#carousel-container .carousel__content\");\r\n  var popupContentBlock = document.querySelectorAll(\"#popup-container .carousel__content\");\r\n  popupInner = document.querySelector(\"#popups .carousel__inner\");\r\n  \r\n  var scrollButtonRight = document.querySelector(\".carousel__scroll-button--right\");\r\n  var scrollButtonLeft = document.querySelector(\".carousel__scroll-button--left\");\r\n \r\n  var scrollOffset, k;\r\n  if(window.innerWidth >= tabletSize && window.innerWidth < desctopSize) {\r\n    k = 2.15;\r\n  } else {\r\n    k = 3.1;\r\n  }  \r\n  \r\n  scrollOffset = parseInt(window.getComputedStyle(document.querySelector(\".medium-column5\"), null).width) * k;\r\n  \r\n  scrollButtonRight.addEventListener(\"click\", function(e) {    \r\n    var currentContent = outer.currentIndex;\r\n    var el = outer.panes[currentContent];\r\n    smooth_scroll_to(el, el.scrollLeft + scrollOffset, 500);\r\n  });\r\n  \r\n  scrollButtonLeft.addEventListener(\"click\", function(e) {\r\n    var currentContent = outer.currentIndex;\r\n    var el = outer.panes[currentContent];\r\n    smooth_scroll_to(el, el.scrollLeft - scrollOffset, 500);\r\n  });\r\n  \r\n  for(var i = 0; i < carouselContent.length; i++) {\r\n    carouselContent[i].addEventListener(\"scroll\", contentScroll);\r\n  }\r\n  \r\n  heightArray = [];\r\n  Array.prototype.forEach.call(popupContentBlock, function(content) {\r\n    heightArray.push(content.clientHeight);\r\n  });\r\n\r\n  if(window.innerWidth >= tabletSize) {\r\n    var outer = new HammerCarousel(carousel);\r\n    popups = new HammerCarousel(popupsEl);\r\n  } else {\r\n    var outer = new HammerCarousel(carousel, Hammer.DIRECTION_HORIZONTAL);\r\n    popups = new HammerCarousel(popupsEl, Hammer.DIRECTION_HORIZONTAL);\r\n  } \r\n  \r\n  var windowSize = {\r\n    x: window.innerWidth,\r\n    y: window.innerHeight\r\n  };\r\n  \r\n  window.onresize = function () {\r\n    \r\n    if(windowSize.x !== window.innerWidth) {\r\n      var i = outer.currentIndex;\r\n      var j = popups.currentIndex;\r\n      if(window.innerWidth >= tabletSize) {        \r\n        outer = new HammerCarousel(carousel);\r\n        popups = new HammerCarousel(popupsEl);\r\n      } else {\r\n        outer = new HammerCarousel(carousel, Hammer.DIRECTION_HORIZONTAL);\r\n        popups = new HammerCarousel(popupsEl, Hammer.DIRECTION_HORIZONTAL);\r\n      }\r\n      HammerCarousel.prototype.show.apply(outer, [i, 0, true]);\r\n      document.getElementById(\"popups-overlay\").classList.add(\"no-animate\");\r\n      HammerCarousel.prototype.show.apply(popups, [j, 0, true]);\r\n      setTimeout(function() {\r\n        document.getElementById(\"popups-overlay\").classList.remove(\"no-animate\");\r\n      }, 0);\r\n    }\r\n    windowSize.x = window.innerWidth;\r\n  };\r\n  \r\n  function contentScroll(e) {    \r\n    var elem = e.target;\r\n    addRemoveScrollButton(elem, elem.parentElement);\r\n  }\r\n  \r\n  var smooth_scroll_to = function(element, target, duration) {\r\n    target = Math.round(target);\r\n    duration = Math.round(duration);\r\n    if (duration < 0) {\r\n        return;\r\n    }\r\n    if (duration === 0) {\r\n        element.scrollLeft = target;\r\n        return scroll();\r\n    }\r\n\r\n    var start_time = Date.now();\r\n    var end_time = start_time + duration;\r\n\r\n    var start_top = element.scrollLeft;\r\n    var distance = target - start_top;\r\n\r\n    // based on http://en.wikipedia.org/wiki/Smoothstep\r\n    var smooth_step = function(start, end, point) {\r\n        if(point <= start) { return 0; }\r\n        if(point >= end) { return 1; }\r\n        var x = (point - start) / (end - start); // interpolation\r\n        return x*x*(3 - 2*x);\r\n    }\r\n    \r\n    function scroll() {\r\n        // This is to keep track of where the element's scrollLeft is\r\n        // supposed to be, based on what we're doing\r\n        var previous_top = element.scrollLeft;\r\n\r\n        // This is like a think function from a game loop\r\n        var scroll_frame = function() {\r\n            if(element.scrollLeft != previous_top) {\r\n                return;\r\n            }\r\n\r\n            // set the scrollLeft for this frame\r\n            var now = Date.now();\r\n            var point = smooth_step(start_time, end_time, now);\r\n            var frameTop = Math.round(start_top + (distance * point));\r\n            element.scrollLeft = frameTop;\r\n\r\n            // check if we're done!\r\n            if(now >= end_time) {\r\n                scroll();\r\n                return;\r\n            }\r\n\r\n            // If we were supposed to scroll but didn't, then we\r\n            // probably hit the limit, so consider it done; not\r\n            // interrupted.\r\n            if(element.scrollLeft === previous_top\r\n                && element.scrollLeft !== frameTop) {\r\n                scroll();\r\n                return;\r\n            }\r\n            previous_top = element.scrollLeft;\r\n\r\n            // schedule next frame for execution\r\n            setTimeout(scroll_frame, 0);\r\n        }\r\n\r\n        // boostrap the animation process\r\n        setTimeout(scroll_frame, 0);\r\n    }\r\n\r\n    return scroll();\r\n}\r\n  \r\n});\r\n\r\nfunction addRemoveScrollButton(elem, container) {\r\n    if(elem.clientWidth + elem.scrollLeft === elem.scrollWidth) {\r\n      container.classList.remove(\"carousel__container--start\");\r\n      container.classList.add(\"carousel__container--end\");\r\n    } else if(elem.scrollLeft === 0) {\r\n      container.classList.add(\"carousel__container--start\");\r\n      container.classList.remove(\"carousel__container--end\");\r\n    } else {      \r\n      container.classList.remove(\"carousel__container--start\");\r\n      container.classList.remove(\"carousel__container--end\");\r\n    }\r\n    \r\n    if(elem.clientWidth === elem.scrollWidth) {\r\n      container.classList.add(\"carousel__container--start\");\r\n      container.classList.add(\"carousel__container--end\");\r\n    }\r\n  }\r\n\r\n var reqAnimationFrame = (function () {\r\n    return window[Hammer.prefixed(window, \"requestAnimationFrame\")] || function (callback) {\r\n      setTimeout(callback, 1000 / 60);\r\n    };\r\n  })();\r\n\r\n function dirProp(direction, hProp, vProp) {\r\n    return (direction & Hammer.DIRECTION_HORIZONTAL) ? hProp : vProp;\r\n  }\r\n\r\n\r\n function HammerCarousel(container, direction) {\r\n    this.container = container.children[1].children[0];\r\n    this.tabs = container.children[0].children[0];\r\n    this.tabsContainer = container.children[0];\r\n    this.direction = direction; \r\n    this.currentIndex = 0;\r\n    \r\n    if(this.container.id == \"carousel-container\") {      \r\n      this.panes = Array.prototype.slice.apply(this.container.children, [0, length - scrollButtonCount]);      \r\n    } else {      \r\n      this.panes = Array.prototype.slice.call(this.container.children, 0);\r\n    }\r\n    \r\n    var self = this;\r\n    this.tabs.addEventListener(\"click\", function(e) {\r\n      \r\n      carouselContent = self.panes;\r\n      e.preventDefault();\r\n      if (e.target.tagName !== \"A\") {\r\n        return;\r\n      }\r\n    \r\n      currentContent = e.target.getAttribute(\"data-tab\");\r\n    \r\n      if(self.currentIndex == 0) {\r\n        k = 1.75;\r\n        scrollOffset = parseInt(window.getComputedStyle(document.querySelector(\".medium-column5\"), null).width) * k;\r\n      }\r\n    \r\n      addRemoveScrollButton(carouselContent[currentContent], self.container);     \r\n      HammerCarousel.prototype.show.apply(self, [currentContent, 0, true]);\r\n    });    \r\n    \r\n    this.containerSize = this.container[dirProp(direction, \"offsetWidth\", \"offsetHeight\")];\r\n\r\n    this.hammer = new Hammer.Manager(this.container);\r\n    this.hammer.add(new Hammer.Pan({\r\n      direction: this.direction,\r\n      threshold: 10\r\n    }));\r\n    this.hammer.on(\"panstart panmove panend pancancel\", Hammer.bindFn(this.onPan, this));\r\n\r\n    this.show(this.currentIndex);\r\n  }\r\n\r\n  HammerCarousel.prototype = {\r\n   \r\n    show: function (showIndex, percent, animate) {\r\n      showIndex = Math.max(0, Math.min(showIndex, this.panes.length - 1));\r\n      percent = percent || 0;\r\n\r\n      Array.prototype.forEach.call(this.tabs.children, function(tab) {\r\n        if(tab.classList[1] == 'carousel__tab--active') {\r\n          tab.classList.remove(\"carousel__tab--active\");\r\n        };\r\n      });\r\n      this.tabs.children[showIndex].classList.add(\"carousel__tab--active\");\r\n     \r\n      var tabTransform, persentTab;\r\n      \r\n      var stopTabTransform;\r\n      if(this.container.id == \"popup-container\") {\r\n        stopTabTransform = 600;\r\n      } else {\r\n         stopTabTransform = 430;\r\n       }\r\n      \r\n     \r\n      \r\n      if (window.innerWidth < stopTabTransform) {        \r\n        if (showIndex === 0) {\r\n          this.tabsContainer.classList.remove(\"carousel__tabs-container--end\");\r\n          this.tabsContainer.classList.add(\"carousel__tabs-container--start\");\r\n          if(this.container.id == \"carousel-container\") {\r\n            persentTab = 14;\r\n          } else {\r\n            persentTab = 53;\r\n          }\r\n          \r\n        } else if (showIndex === 1) {\r\n          this.tabsContainer.classList.remove(\"carousel__tabs-container--end\");\r\n          this.tabsContainer.classList.remove(\"carousel__tabs-container--start\");\r\n          persentTab = 0;         \r\n        } else if (showIndex === 2) {\r\n          this.tabsContainer.classList.remove(\"carousel__tabs-container--start\");\r\n          this.tabsContainer.classList.add(\"carousel__tabs-container--end\");  \r\n          if(this.container.id == \"carousel-container\") {\r\n            persentTab = -20;\r\n          } else {\r\n            persentTab = -51;\r\n          }\r\n        }\r\n      } else {\r\n        tabTransform = 'translate3d(0, 0, 0)';\r\n      }\r\n      \r\n      tabTransform = 'translate3d('+persentTab+'%, 0, 0)';\r\n      this.tabs.style.transform = tabTransform;\r\n      this.tabs.style.mozTransform = tabTransform;\r\n      this.tabs.style.webkitTransform = tabTransform;\r\n      \r\n      var className = this.container.className;\r\n        if (animate) {\r\n          if (className.indexOf(\"animate\") === -1) {\r\n            this.container.className += \" animate\";\r\n          }\r\n        } else {\r\n          if (className.indexOf(\"animate\") !== -1) {\r\n            this.container.className = className.replace(\"animate\", \"\").trim();\r\n          }\r\n        }\r\n      \r\n      var paneIndex, pos, translate;\r\n      if (window.innerWidth < tabletSize) {      \r\n        for (paneIndex = 0; paneIndex < this.panes.length; paneIndex++) {\r\n          pos = (this.containerSize / 100) * (((paneIndex - showIndex) * 100) + percent);\r\n          \r\n          if(this.container.id == \"popup-container\") {\r\n            popupInner.style.height = heightArray[showIndex] + 50 + 'px';\r\n          } \r\n          \r\n          if (this.direction & Hammer.DIRECTION_HORIZONTAL) {\r\n            translate = \"translate3d(\" + pos + \"px, 0, 0)\";\r\n          } else {\r\n            translate = \"translate3d(0, \" + pos + \"px, 0)\";\r\n          }\r\n          this.panes[paneIndex].style.transform = translate;\r\n          this.panes[paneIndex].style.mozTransform = translate;\r\n          this.panes[paneIndex].style.webkitTransform = translate;          \r\n        }\r\n        \r\n      } else {\r\n        for (paneIndex = 0; paneIndex < this.panes.length; paneIndex++) {\r\n          translate = \"translate3d(0, 0, 0)\";\r\n          this.panes[paneIndex].style.transform = translate;\r\n          this.panes[paneIndex].style.mozTransform = translate;\r\n          this.panes[paneIndex].style.webkitTransform = translate;\r\n        }\r\n        this.panes.forEach(function(pane) {\r\n          if(pane.classList[1] == 'carousel__content--active') {\r\n            pane.classList.remove(\"carousel__content--active\");\r\n          }\r\n        });\r\n        this.panes[showIndex].classList.add(\"carousel__content--active\");\r\n      }\r\n\r\n      this.currentIndex = showIndex;\r\n    },\r\n    \r\n    onPan: function (ev) {\r\n      if(ev.pointers[0].type !== undefined) {\r\n        return;\r\n      }\r\n      if (window.innerWidth < tabletSize) {\r\n       \r\n        var delta = dirProp(this.direction, ev.deltaX, ev.deltaY);\r\n        var percent = (100 / this.containerSize) * delta;\r\n        var animate = false;\r\n\r\n        if (ev.type == \"panend\" || ev.type == \"pancancel\") {\r\n          if (Math.abs(percent) > 20 && ev.type == \"panend\") {\r\n            this.currentIndex += (percent < 0) ? 1 : -1;\r\n          }\r\n          percent = 0;\r\n          animate = true;\r\n        }\r\n        if(Math.abs(ev.deltaY) > 15) {\r\n          percent = 0;\r\n          animate = true;\r\n        }\r\n        this.show(this.currentIndex, percent, animate);\r\n      }\r\n\r\n    }\r\n  };\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  var elements = document.querySelectorAll(\"*[data-popups]\");\r\n  popupOverlay = document.getElementById(\"popups-overlay\");\r\n  \r\n  Array.prototype.forEach.call(elements, function(el) {\r\n    el.addEventListener(\"click\", openPopup);\r\n  });\r\n  \r\n  var closer = document.querySelector(\".popups__closer\");\r\n  \r\n  closer.addEventListener(\"click\", function(e) {\r\n    if(flag === false) {\r\n      document.body.classList.remove(\"ov-hidden\");\r\n    }    \r\n    document.body.scrollTop = scrollTopOffset;\r\n    popupOverlay.classList.remove(\"popups-overlay--open\");    \r\n  });\r\n  \r\n});\r\nvar popupOverlay;\r\nvar scrollTopOffset;\r\nvar flag = false;\r\n\r\nfunction openPopup(e) {\r\n  if(e.target.offsetParent.id.indexOf(\"popup\") !== -1) {\r\n    flag = true;\r\n  } else {\r\n    flag = false;\r\n  }\r\n  var popupNumber = e.currentTarget.getAttribute(\"data-popups\");\r\n  popupOverlay.classList.add(\"no-animate\");\r\n  HammerCarousel.prototype.show.apply(popups, [popupNumber, 0, true]);\r\n  var body = document.body;\r\n  scrollTopOffset = body.scrollTop;\r\n  body.classList.add(\"ov-hidden\"); \r\n  popupOverlay.classList.add(\"popups-overlay--open\");\r\n  popupOverlay.classList.remove(\"no-animate\");\r\n}\r\n// (function(){\r\n// код\r\n// }());\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  var links = document.querySelectorAll(\"*[data-popup]\");\r\n  Array.prototype.forEach.call(links, function(link) {\r\n    link.addEventListener(\"click\", openRehabPopup.bind(null, link));\r\n  });\r\n  \r\n  var backButtons = document.querySelectorAll(\".rehub-popup__back\");\r\n  Array.prototype.forEach.call(backButtons, function(button) {\r\n    button.addEventListener(\"click\", closeRehabPopup);\r\n  });\r\n  \r\n});\r\n\r\nvar scrollTopOffsetRehab;\r\n\r\nfunction openRehabPopup(link, event) {\r\n  event.preventDefault();  \r\n  var body = document.body;\r\n  scrollTopOffsetRehab = body.scrollTop;\r\n  setTimeout( function() {\r\n    body.classList.add(\"ov-hidden\"); \r\n  }, 300);\r\n  var popup = document.getElementById(link.getAttribute(\"href\"));\r\n  popup.classList.add(\"rehub-popup--open\");\r\n}\r\n\r\nfunction closeRehabPopup(event) {\r\n  event.preventDefault();\r\n  var body = document.body;  \r\n  body.classList.remove(\"ov-hidden\");\r\n  body.scrollTop = scrollTopOffsetRehab;  event.target.parentElement.parentElement.parentElement.parentElement.parentElement.classList.remove(\"rehub-popup--open\");\r\n}"],"file":"main.js"}